#import_from_git(url: "git@github.com:mirego/fastlane-toolkit.git")
import "../../../Fastlane-Template/Fastfile"

platform :ios do
  before_all do |lane|
    setup_project
  end

  desc "Init project variables"
  lane :setup_project do
    init_project(
      xcodeproj: ENV["XCODEPROJ"],
      target: ENV["TARGET"],
      scheme: ENV["SCHEME"],
      configuration: ENV["CONFIGURATION"],
      output_name: ENV["OUTPUT_NAME"],
      match_type: ENV["MAYCH_TYPE"]
    ) 
  end

  desc "Build"
  lane :build_ios do
    bump_version_number_and_build_number(version: ENV["REGEX"], build_number:ENV["BUILD_NUMBER"])
    add_badge_alpha(badge:true) #true or false
    download_certificates_and_profiles
    build
  end
end
